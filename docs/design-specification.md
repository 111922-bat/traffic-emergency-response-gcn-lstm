# 设计规范 - 交通流预测监控系统

## 1. 设计方向与理念

### 1.1 风格定位：Dark Mode First（深色优先监控界面）

专为24/7交通监控中心设计的深色主题界面，通过深色背景显著减少操作员长时间监控的视觉疲劳。采用**深灰黑背景 + 高对比度数据 + 科技蓝主色调**的组合，让拥堵热力图、实时路况数据、告警信息在深色背景上更加突出醒目。

**设计理念：**
- 深色主导（90%）+ 鲜明强调色（10%）
- 通过表面亮度差异创建层次，而非传统阴影
- 发光效果替代投影，强化科技感与聚焦感
- OLED优化的纯黑背景节省能源

**参考案例：** Grafana监控平台、AWS CloudWatch Dashboard、Datadog APM界面、航空管制系统

### 1.2 核心优势与权衡

**优势：**
- 减少24/7监控环境下的眼疲劳，提升操作员舒适度
- 深色背景让彩色数据可视化（热力图、图表、告警）更加突出
- 高对比度UI确保关键信息快速识别
- 专业科技感符合监控中心的形象定位

**权衡：**
- 打印输出效果较差（深色背景耗墨）
- 不适合长篇文本阅读场景（本系统以数据可视化为主，影响有限）

---

## 2. 设计令牌

### 2.1 色彩系统

**背景层次（表面高度系统）**

| 用途 | 颜色值 | 应用场景 |
|------|--------|----------|
| 纯黑底 | #000000 | OLED优化、侧边栏、深度背景 |
| 主背景 | #0A0E1A | 页面主要背景 |
| 次级背景 | #151B2C | 内容区域背景 |
| 卡片表面 | #1A2235 | 数据卡片、图表容器 |
| 悬停表面 | #222D45 | 交互式元素悬停状态 |
| 模态框 | #2A3652 | 弹窗、浮层 |

**主题色（科技蓝 + 交通语义色）**

| 用途 | 颜色值 | 对比度（on #0A0E1A） | 应用 |
|------|--------|---------------------|------|
| 主色调 | #2196F3 | 8.6:1 ✅ | 主要交互、链接、强调 |
| 主色悬停 | #42A5F5 | 9.2:1 ✅ | 按钮悬停、交互反馈 |
| 正常状态（绿） | #4CAF50 | 7.8:1 ✅ | 畅通路段、正常指标 |
| 预警状态（黄） | #FFC107 | 12.1:1 ✅ | 拥堵预警、中等风险 |
| 拥堵状态（红） | #F44336 | 7.2:1 ✅ | 严重拥堵、告警 |
| 应急状态（橙） | #FF6B35 | 8.1:1 ✅ | 应急车辆、紧急事件 |

**文本颜色**

| 层级 | 颜色值 | 不透明度 | 应用 |
|------|--------|----------|------|
| 主要文本 | #E4E4E7 | 100% | 标题、关键数据 |
| 次要文本 | #A1A1AA | 85% | 说明文字、标签 |
| 辅助文本 | #71717A | 60% | 提示信息、占位符 |

**边框与分隔线**

| 用途 | 值 | 应用 |
|------|------|------|
| 微妙边框 | rgba(255,255,255,0.08) | 卡片边框 |
| 标准边框 | rgba(255,255,255,0.12) | 输入框、分隔线 |
| 强调边框 | rgba(255,255,255,0.18) | 激活状态、焦点 |

### 2.2 字体系统

**字体族**

| 用途 | 字体栈 | 理由 |
|------|--------|------|
| 主字体 | Inter, -apple-system, sans-serif | 清晰易读，数字辨识度高 |
| 数据字体 | 'JetBrains Mono', 'Fira Code', monospace | 等宽字体，适合数据展示 |
| 显示字体 | 'Space Grotesk', Inter, sans-serif | 现代科技感，用于大标题 |

**字号与行高体系**

| 层级 | 字号 | 字重 | 行高 | 字间距 | 应用场景 |
|------|------|------|------|--------|----------|
| 大标题 | 32px | 600 | 1.2 | -0.01em | 模块标题 |
| 标题 | 24px | 600 | 1.3 | 0 | 卡片标题、区域标题 |
| 副标题 | 18px | 500 | 1.4 | 0 | 次级标题、重要标签 |
| 正文 | 16px | 400 | 1.5 | 0 | 常规文本、描述 |
| 小文本 | 14px | 400 | 1.5 | 0.01em | 辅助信息、标注 |
| 数据文本 | 16-24px | 500 | 1.2 | 0 | 实时数据、指标数值 |
| 代码/数据 | 14px | 400 | 1.4 | 0 | 路段ID、数据列表 |

**深色模式字体优化：**
- 使用较轻字重（400-500）避免光晕效应
- 主要文本使用 #E4E4E7 而非纯白，减少眼疲劳
- 应用字体平滑：`-webkit-font-smoothing: antialiased`

### 2.3 间距系统（8点网格）

| Token | 值 | 应用 |
|-------|-----|------|
| spacing-1 | 4px | 紧密元素间距、图标padding |
| spacing-2 | 8px | 小间距、内联元素 |
| spacing-3 | 12px | 输入框内边距 |
| spacing-4 | 16px | 标准元素间距 |
| spacing-5 | 24px | 卡片内容间距 |
| spacing-6 | 32px | 卡片内边距、模块间距 |
| spacing-8 | 48px | 大区块间距 |
| spacing-10 | 64px | 主要模块间距 |
| spacing-12 | 80px | 顶部导航高度 |

### 2.4 圆角与其他

**圆角（中等圆角，保持专业感）**

| 用途 | 值 | 应用 |
|------|-----|------|
| 小圆角 | 8px | 按钮、标签、输入框 |
| 标准圆角 | 12px | 卡片、图表容器 |
| 大圆角 | 16px | 模态框、面板 |

**发光效果（替代传统阴影）**

| 类型 | 效果值 | 应用 |
|------|--------|------|
| 主色发光 | 0 0 20px rgba(33,150,243,0.4) | 主按钮悬停 |
| 告警发光 | 0 0 24px rgba(244,67,54,0.5) | 严重拥堵告警 |
| 预警发光 | 0 0 20px rgba(255,193,7,0.4) | 预警状态 |
| 卡片边缘 | 0 0 0 1px rgba(255,255,255,0.08) | 卡片微妙边界 |

**动画时长**

| 速度 | 值 | 应用 |
|------|-----|------|
| 快速 | 150ms | 按钮悬停、图标变化 |
| 标准 | 250ms | 卡片展开、面板切换 |
| 慢速 | 400ms | 模态框出现、页面过渡 |

**缓动函数：** ease-out（默认）、cubic-bezier(0.4, 0, 0.2, 1)（快速响应）

---

## 3. 核心组件规范

### 3.1 实时监控数据卡片

**结构：** 卡片容器 + 图标/状态指示器 + 数据标题 + 主要数值 + 趋势指示 + 辅助信息

**视觉规范：**
- 背景：#1A2235（卡片表面）
- 边框：1px solid rgba(255,255,255,0.08)
- 圆角：12px
- 内边距：24px
- 最小高度：140px

**数据展示：**
- 主要数值：32-40px，字重500，等宽字体
- 单位标签：14px，#A1A1AA
- 状态颜色：根据阈值动态显示（绿/黄/红）
- 趋势图标：16px，箭头方向+颜色指示涨跌

**状态变化：**
- 正常：左边框 3px solid #4CAF50
- 预警：左边框 3px solid #FFC107 + 微弱黄色发光
- 告警：左边框 3px solid #F44336 + 红色脉动发光（0.5s周期）

**悬停效果：**
- 背景变为 #222D45
- 边框变为 rgba(255,255,255,0.12)
- 过渡时间 150ms

### 3.2 拥堵热力图容器

**结构：** 全屏容器 + 工具栏 + 地图画布 + 图例 + 时间轴控制

**容器规范：**
- 背景：#151B2C（次级背景）
- 高度：60-70vh（根据布局调整）
- 圆角：16px
- 边框：1px solid rgba(255,255,255,0.08)

**热力图配色（拥堵程度）：**
- 畅通（<50 veh/km）：#4CAF50
- 轻度拥堵（50-80）：#8BC34A
- 中度拥堵（80-120）：#FFC107
- 重度拥堵（120-180）：#FF9800
- 严重拥堵（>180）：#F44336

**工具栏：**
- 位置：顶部或侧边浮动
- 背景：rgba(26,34,53,0.95) + backdrop-blur(10px)
- 按钮：32px高度，8px圆角，间距8px
- 图标：20px，#A1A1AA默认，#E4E4E7激活

**图例：**
- 位置：右下角
- 背景：rgba(26,34,53,0.9)
- 内边距：16px
- 圆角：12px

### 3.3 预测图表组件

**图表类型：** 时间序列折线图、柱状图、面积图

**容器规范：**
- 背景：#1A2235
- 边框：1px solid rgba(255,255,255,0.08)
- 圆角：12px
- 内边距：24px
- 标题：18px，字重500，#E4E4E7

**图表样式（基于 ECharts）：**
- 网格线：rgba(255,255,255,0.05)，细线
- 坐标轴文字：14px，#A1A1AA
- 数据线：
  - 速度预测：#2196F3，2px粗
  - 拥堵预测：#FFC107，2px粗
  - 置信区间：半透明填充，rgba(33,150,243,0.2)
- 数据点：圆形，6px，带白色描边
- 悬停：数据点放大至8px，显示工具提示

**工具提示：**
- 背景：rgba(42,54,82,0.98)
- 边框：1px solid rgba(255,255,255,0.12)
- 圆角：8px
- 内边距：12px 16px
- 文字：14px，#E4E4E7

### 3.4 主要操作按钮

**主按钮（Primary）：**
- 高度：48px
- 水平内边距：24-32px
- 圆角：8px
- 背景：#2196F3
- 文字：16px，字重600，白色
- 悬停：background #42A5F5 + 发光效果（0 0 20px rgba(33,150,243,0.4)）
- 激活：transform scale(0.98)
- 过渡：150ms ease-out

**次要按钮（Secondary）：**
- 相同尺寸
- 背景：透明
- 边框：2px solid #2196F3
- 文字：#2196F3
- 悬停：背景 #2196F3，文字白色，发光效果

**应急按钮（Emergency）：**
- 相同尺寸
- 背景：#FF6B35
- 文字：白色
- 悬停：发光效果（0 0 24px rgba(255,107,53,0.5)）

**图标按钮（Ghost）：**
- 尺寸：40×40px
- 背景：透明
- 图标：20px，#A1A1AA
- 悬停：背景 #222D45，图标 #E4E4E7
- 圆角：8px

### 3.5 表单输入组件

**文本输入框：**
- 高度：48px
- 内边距：12px 16px
- 圆角：8px
- 背景：#151B2C
- 边框：1px solid rgba(255,255,255,0.12)
- 文字：16px，#E4E4E7
- 占位符：#71717A

**焦点状态：**
- 边框：2px solid #2196F3
- 发光：0 0 0 3px rgba(33,150,243,0.1)

**错误状态：**
- 边框：1px solid #F44336
- 发光：0 0 0 3px rgba(244,67,54,0.1)

**下拉选择器：**
- 相同基础样式
- 下拉面板：背景 #1A2235，边框同上，最大高度 300px
- 选项悬停：背景 #222D45
- 选项激活：背景 #2196F3，文字白色

### 3.6 顶部导航栏

**结构：** Logo + 模块导航 + 实时时钟 + 用户信息

**容器规范：**
- 高度：80px
- 背景：rgba(10,14,26,0.95) + backdrop-blur(12px)（半透明模糊效果）
- 底部边框：1px solid rgba(255,255,255,0.08)
- 位置：固定顶部

**Logo区域：**
- 左侧，宽度 200-240px
- Logo尺寸：40px高度
- 系统标题：18px，字重600，#E4E4E7

**模块导航：**
- 水平排列，间距32px
- 链接：16px，#A1A1AA
- 激活状态：#2196F3，底部 3px 实线
- 悬停：#E4E4E7，底部 3px 渐变出现
- 过渡：200ms

**实时时钟：**
- 位置：右侧区域
- 时间：18px，等宽字体，#E4E4E7
- 日期：14px，#A1A1AA

**用户信息：**
- 最右侧
- 头像：36×36px，圆形，边框 2px solid rgba(255,255,255,0.12)
- 用户名：14px，#A1A1AA
- 下拉菜单：点击展开，样式同下拉选择器

---

## 4. 布局架构与交互模式

### 4.1 整体布局（单页应用）

**结构：** 固定顶部导航 + 左侧模块切换栏 + 主内容区 + 可选右侧面板

**顶部导航栏：**
- 固定定位，z-index: 1000
- 高度 80px
- 背景半透明模糊

**左侧模块栏（可选）：**
- 宽度 60-80px（收起）/ 240px（展开）
- 背景：#000000（纯黑）
- 图标垂直排列，间距24px
- 激活模块：背景 #222D45，左边框 3px solid #2196F3

**主内容区：**
- 填充剩余空间
- 背景：#0A0E1A（主背景）
- 内边距：24-32px
- 最大宽度：1920px（居中）

**响应式策略：**
- 桌面（>1280px）：完整布局，左侧栏展开
- 平板（768-1279px）：左侧栏收起，主内容区扩展
- 移动（<768px）：隐藏左侧栏，底部 Tab 导航

### 4.2 实时监控界面布局

**区域划分：** 顶部概览卡片 + 中央热力图 + 底部关键路段列表

**顶部概览卡片（4列）：**
- Grid 布局：repeat(4, 1fr)
- 间距：24px
- 卡片高度：140px
- 内容：总拥堵里程、平均速度、事件数量、系统状态

**中央热力图：**
- 占据主要空间，高度 50-60vh
- 全宽，圆角16px
- 浮动工具栏（缩放、图层、刷新）
- 实时数据流更新，动画过渡

**底部关键路段列表：**
- 横向滚动，固定高度 200px
- 卡片宽度 280px，间距16px
- 每个路段：路段ID + 实时速度 + 状态条

### 4.3 预测结果可视化布局

**区域划分：** 预测参数输入 + 主图表区 + 时空动画 + 置信度面板

**预测参数输入（顶部卡片）：**
- 水平排列：事故位置选择 + 时间窗口 + 预测步长 + 执行按钮
- 高度：80px，间距16px

**主图表区（2列）：**
- 左列（60%）：速度预测时间序列图
- 右列（40%）：拥堵密度预测柱状图
- 高度：400px，间距24px

**时空动画：**
- 全宽，高度 350px
- 地图+路径动画，播放控制条
- 显示传播速度、影响范围、持续时长

**置信度面板（侧边或底部）：**
- 模型元信息：model_id、version、metrics
- 置信度进度条：绿色（>0.8）、黄色（0.6-0.8）、红色（<0.6）

### 4.4 应急响应操作界面布局

**区域划分：** 事故输入表单 + 地图操作区 + 车辆调度面板 + 路径规划结果

**事故输入表单（左侧面板）：**
- 宽度 320px
- 表单字段：事故位置、类型、严重程度、车道数
- 提交按钮：应急色（#FF6B35）

**地图操作区（中央）：**
- 占据主要空间
- 可标记事故点、应急车辆位置、规划路径
- 图层切换：事故、车辆、路径

**车辆调度面板（右侧可折叠）：**
- 宽度 360px
- 车辆列表：状态、位置、可调度性
- 调度按钮、路径分配

**路径规划结果（底部抽屉）：**
- 高度 200-300px
- 主路径 + 备选路径，ETA对比
- 路径说明文字

### 4.5 系统性能监控面板布局

**区域划分：** 顶部指标卡片 + 中央性能图表 + 底部系统日志

**顶部指标卡片（6列）：**
- 模型MAE、RMSE、R²、推理时间、吞吐量、缓存命中率
- 小卡片，高度 100px

**中央性能图表（3列）：**
- CPU/内存使用率（折线图）
- 响应时间分布（直方图）
- 请求量趋势（面积图）
- 高度：300px

**底部系统日志（可选）：**
- 表格形式，固定高度 200px
- 滚动显示最新日志
- 级别标识：INFO（蓝）、WARN（黄）、ERROR（红）

### 4.6 动画与交互模式

**实时数据更新动画：**
- 数据卡片：数值变化时，闪烁效果（0 0 12px 主题色，持续300ms）
- 热力图：颜色渐变过渡，250ms ease-out
- 图表：新数据点从右侧滑入，旧数据点左移

**告警脉动效果：**
- 严重告警：红色边框 + 发光，1秒周期脉动
- CSS: `animation: pulse 1s ease-in-out infinite`

**悬停反馈：**
- 卡片：背景变亮、边框变强、150ms过渡
- 按钮：发光效果、轻微放大
- 地图标记：放大至120%、弹出信息框

**加载状态：**
- 骨架屏：与卡片尺寸一致，灰色渐变动画
- 加载指示器：科技蓝旋转圆环，48px

**模态框动画：**
- 背景遮罩：淡入，rgba(0,0,0,0.7)，250ms
- 内容：缩放+淡入，从0.95到1，300ms ease-out

---

## 5. 交互细节与专项设计

### 5.1 告警与状态反馈

**告警优先级：**
- P0（紧急）：红色脉动发光 + 顶部横幅通知 + 声音提示（可选）
- P1（重要）：红色左边框 + 发光效果
- P2（警告）：黄色左边框 + 微弱发光
- P3（信息）：蓝色左边框，无发光

**状态色彩映射：**
- 在线/正常：绿色 #4CAF50
- 离线/异常：红色 #F44336
- 处理中：黄色 #FFC107
- 待机/未激活：灰色 #71717A

**通知系统：**
- 位置：右上角
- 宽度：360px
- 自动消失：3-5秒（可配置）
- 堆叠显示，最多3条

### 5.2 数据可视化规范

**图表通用规范：**
- 主题：深色主题
- 背景：#1A2235（容器背景）
- 网格线：rgba(255,255,255,0.05)
- 坐标轴：14px，#A1A1AA
- 图例：右上角，可点击隐藏系列

**热力图颜色映射：**
- 使用5级色阶（绿→黄→橙→红）
- 动态范围调整，突出拥堵区域
- 添加半透明白色描边提升清晰度

**实时数据流图表：**
- 窗口滚动：保留最近60个数据点
- 平滑过渡：250ms
- 异常值标注：红色圆点+标签

### 5.3 响应式设计

**断点：**
- Desktop: >1280px（完整功能）
- Tablet: 768-1279px（简化布局）
- Mobile: <768px（仅查看功能，不建议操作）

**平板适配（768-1279px）：**
- 4列卡片变为2列
- 隐藏左侧栏，改为顶部 Tab
- 图表堆叠显示，全宽
- 侧边面板改为底部抽屉

**触摸优化（平板）：**
- 按钮最小尺寸：48×48px
- 间距增加至 16-24px
- 禁用悬停效果，改为点击激活
- 滑动手势支持（切换模块）

### 5.4 性能优化策略

**虚拟滚动：**
- 长列表（>50项）使用虚拟滚动
- 仅渲染可见区域+缓冲区

**图表按需加载：**
- 非可见图表延迟初始化
- 切换到对应模块时再渲染

**实时数据节流：**
- WebSocket数据更新频率：500ms
- 使用 requestAnimationFrame 优化动画

**缓存策略：**
- 静态资源：强缓存
- API数据：协商缓存+过期时间
- 地图瓦片：本地缓存

### 5.5 可访问性（A11y）

**键盘导航：**
- Tab 键顺序：逻辑流动
- 焦点环：2px solid #2196F3，偏移2px
- 快捷键：Ctrl+1-4切换主模块

**屏幕阅读器支持：**
- 语义化HTML标签
- ARIA标签：role、aria-label、aria-live
- 动态内容更新：aria-live="polite"

**对比度：**
- 主要文本：15:1（AAA级）
- 次要文本：8.9:1（AAA级）
- 状态色：≥7:1（AA级）

**减弱动画：**
- 检测 prefers-reduced-motion
- 禁用脉动、滚动动画
- 保留关键反馈动画

---

**文档版本：** 1.0  
**最后更新：** 2025-11-05  
**设计师：** MiniMax Agent  
**适用项目：** 交通流预测监控系统
