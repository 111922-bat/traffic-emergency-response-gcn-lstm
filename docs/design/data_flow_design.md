# 交通流预测系统数据流与处理流程设计蓝图

## 0. 概述与设计目标(What/Why)

在城市交通系统持续扩张与出行需求日益增长的背景下,拥堵治理的核心挑战从“点状监测”升级为“网级预测与协同决策”。本设计蓝图围绕城市路网的实时速度、流量、占有率预测任务,构建一套端到端的数据流与处理流程,覆盖数据输入、预处理与特征工程、模型推理与预测、结果后处理与可视化、数据存储与管理,以及实时数据流处理架构。系统目标是以分钟级更新为基本节律,提供5/15/30/60分钟多步预测,满足拥堵识别、预警、信号优化与应急管理的业务需求,并在可解释性、鲁棒性与工程可落地方面达到均衡。

叙事主线遵循“数据→预处理→模型→后处理→可视化→存储/治理→实时架构→评测与合规”的闭环。数据层面,优先汇聚传感器/断面检测数据(速度/流量/占有率)、路网拓扑与元数据、天气与节假日等外部因素;处理层面,建立统一时间对齐、滑动窗口与归一化规范,构造多邻接(拓扑/距离/旅行时间/相关性)与动态图(时变邻接)机制;模型层面,采用GCN+LSTM/TCN/Transformer的时空并行范式,并根据场景选择静态/动态图与融合策略;后处理层面,进行时空一致性校正、拥堵阈值化与传播风险评估;可视化层面,提供走廊/路网级热力图、时序曲线与事件对齐视图;存储与治理层面,实施分层存储(原始/清洗/特征/结果/指标)、版本管理、数据质量监控与审计;实时架构层面,设计消息总线与流处理管线,保障低延迟与弹性扩展,并配置容错与回退策略。评测方面,统一MAE/RMSE/MAPE口径与数据切分,结合空间统计指标(Global Moran’s I、FSTI、网络Ripley’s K)与路网异质性(Hits@1)进行可解释性评估与结构—性能映射分析[^1][^2][^3]。

信息缺口与前提假设:当前跨城统一评测协议与外部因素融合的量化收益尚不完备;动态图在线更新与实时推理延迟指标缺乏统一基准;事故/施工/信号的字段字典与接口协议需与当地平台对齐;多邻接权重学习的超参数敏感性评估不足;PeMSD7(M/L)官方统一说明页缺失,邻接矩阵与坐标元数据需结合论文或仓库核验。后续实施需以数据治理与接口联调为前置工作,逐步补齐上述缺口。

## 1. 数据输入流程设计(实时交通数据、天气、事故信息等)

数据输入是系统的基础层,负责汇聚多源数据并以统一接口进入处理管线。我们将数据源划分为四类:传感器/断面检测(速度/流量/占有率)、路网拓扑与元数据(节点/边、坐标、限速、车道数)、外部因素(天气、节假日、事件),以及公开数据集(METR-LA、PEMS-BAY、PEMS03/04/07/08、PeMSD7)。接口协议以REST/gRPC/Kafka为主,统一时间粒度为5分钟,支持批量与增量拉取,并进行去重与时序对齐。质量控制包括缺失扫描、异常检测(基于统计或规则)、时钟同步(时区统一)、设备健康监控(心跳与延迟)。数据口径以公开数据集的规范为参照,确保字段与采样周期的一致性[^4][^5][^6][^7][^8]。

为便于工程实施,表1给出数据源—字段—采样—延迟—质量—合规的对照。

表1 数据源与字段对照表
| 数据源 | 核心字段 | 采样周期 | 延迟特性 | 质量风险 | 合规要点 |
|---|---|---|---|---|---|
| 传感器/断面检测 | 速度、流量、占有率、设备心跳 | 5分钟 | 秒级至分钟级上报 | 设备故障、丢包、时钟漂移 | 数据使用协议、隐私保护 |
| 路网拓扑/元数据 | 节点/边、坐标、限速、车道数、路段类型 | 静态(周期性更新) | 版本化更新 | 坐标误差、拓扑不一致 | 地图合规、版本记录 |
| 天气 | 温度、降水、能见度、风 | 5–15分钟 | 分钟级 | 站点覆盖不足、插值误差 | 气象数据许可 |
| 节假日/事件 | 节假日标识、事故/施工/封闭、事件级别 | 实时/分钟级 | 实时 | 事件漏报、语义不一致 | 事件数据共享协议 |
| 公开数据集(METR-LA、PEMS-BAY、PEMS03/04/07/08、PeMSD7) | 速度/流量/占有率、邻接矩阵与元数据 | 5分钟 | 批量 | 口径差异、字段缺失 | 研究用途许可、引用规范 |

为保障接口稳定性与扩展性,表2列出接口与鉴权清单。

表2 接口与鉴权清单
| 接口类型 | 端点/主题 | 协议 | 鉴权方式 | 频率 | 限流策略 |
|---|---|---|---|---|---|
| REST | /sensors/observations | HTTP/JSON | OAuth2/Token | 5分钟批量/增量 | 每IP QPS限制 |
| gRPC | traffic.TopicService | Protobuf | mTLS | 实时流 | 会话级限流 |
| Kafka | traffic.raw.observations | TCP/Avro | SASL | 实时流 | 主题级吞吐上限 |
| 天气 | weather.forecast | HTTP/JSON | API Key | 5–15分钟 | 每日配额 |
| 事件 | events.incidents | HTTP/JSON/Webhook | OAuth2 | 实时 | 去重与重试 |

### 1.1 实时交通数据接入

传感器数据以5分钟为基本粒度,支持心跳与时钟同步;设备故障触发告警与旁路策略(如前向填充或插值)。数据进入消息总线后进行去重与时序对齐,确保窗口化样本的一致性。断面检测数据的字段与口径参考公开数据集规范,以避免后续处理中的口径偏差[^4]。

### 1.2 天气与节假日数据接入

天气数据需进行空间插值与时间对齐,节假日采用独热编码或周期嵌入。缺失处理建议采用前向填充与插值结合,并记录插值策略与影响范围,以便在评测环节进行敏感性分析。

### 1.3 事故/施工/事件数据接入

事件数据包含类型、位置、时段与影响范围,进入统一事件总线并与预测结果进行对齐与叠加分析。字段字典需与当地平台(交通管理部门、导航平台)对齐,确保语义一致与可复现。公开事件平台(如Waze Live Map)可作为参考与补充来源[^6]。

### 1.4 公开数据集接入(METR-LA/PEMS-BAY/PEMS03/04/07/08/PeMSD7)

公开数据集用于离线评测与模型复现。METR-LA与PEMS-BAY提供速度序列与邻接矩阵,适合小规模图模型入门;PEMS03/04/07/08提供多变量(流量/速度/占有率),适合进阶与挑战任务;PeMSD7(M/L)需结合论文或仓库核验元数据与邻接矩阵。表3总结数据集的用途与核验要点[^5][^7][^8]。

表3 数据集获取路径与用途说明
| 数据集 | 用途 | 字段与元数据 | 核验要点 |
|---|---|---|---|
| METR-LA | 入门/复现 | 速度序列、邻接矩阵、坐标 | 邻接矩阵与坐标一致性 |
| PEMS-BAY | 入门/复现 | 速度序列、邻接矩阵、坐标 | 时间跨度与缺失率 |
| PEMS03/04/07/08 | 进阶/挑战 | 流量/速度/占有率、站点元数据 | 字段字典与采样口径 |
| PeMSD7(M/L) | 挑战 | 速度、距离矩阵 | 官方说明页缺失,需论文/仓库核验 |

## 2. 数据预处理与特征工程流程

预处理与特征工程是将原始数据转化为可训练时空张量与图结构输入的关键环节。我们采用“清洗→对齐→滑动窗口→归一化→邻接构建→外部特征融合”的标准流水线,并在每一环节定义质量控制点与输出规范。

清洗与对齐:统一时区与采样周期,处理缺失(插值/前向填充)与异常(箱线图/3σ),并进行重采样与时间索引对齐。滑动窗口:历史窗口长度建议为12步(60分钟),输出为未来1/3/6/12步(5/15/30/60分钟)。归一化:采用Z-Score或Min-Max,训练/验证/测试统计量一致,避免数据泄漏。邻接矩阵:构建静态(拓扑/距离/旅行时间)与动态(相关性/时变)两类,支持多邻接融合与稀疏化。外部特征:节假日独热、天气缩放、事件编码,并与主特征对齐与缺失处理。输出规范:张量形状统一为[batch, input_len, node, channels],并记录元数据(窗口、步长、归一化统计、邻接参数),确保可复现[^9][^10][^11][^12][^13][^14]。

表4给出预处理流水线清单与关键参数。

表4 预处理流水线清单
| 步骤 | 输入 | 处理方法 | 输出 | 关键参数/注意事项 |
|---|---|---|---|---|
| 加载与解析 | .h5/.csv/.npz | 时间戳解析、字段对齐 | 张量X(T×N×C) | 时区统一、字段一致性 |
| 清洗与对齐 | X | 缺失插值/异常剔除/重采样 | X_clean | 插值策略、异常阈值 |
| 窗口化 | X_clean | 滑窗生成样本 | (X_win, Y) | 历史12步、预测1/3/6/12步 |
| 归一化 | X_win, Y | Z-Score/Min-Max | X_norm, Y_norm | 仅用训练集统计量 |
| 划分 | X_norm, Y_norm | 时间顺序切分 | train/val/test | 60/20/20或70/10/20 |
| 邻接构建 | 坐标/距离/旅行时间/相关性 | 高斯核/阈值化/稀疏化 | A_static/A_dynamic | 记录核参数与阈值 |
| 外部特征 | 日历/天气/事件 | 编码/缩放/对齐 | E | 缺失处理与口径一致 |
| 输出打包 | X_norm, Y_norm, A, E | 元数据记录 | 数据集产物 | 形状与统计量一致性 |

表5总结邻接矩阵构建策略的工程取舍。

表5 邻接矩阵构建策略对照
| 策略 | 构造方法 | 优点 | 局限 | 适用场景 |
|---|---|---|---|---|
| 静态距离图 | 距离×高斯核→阈值化 | 简单稳健、可解释 | 无法刻画时变依赖 | 稳态路网、入门基准 |
| 旅行时间加权 | 路网旅行时间作为权重 | 反映真实通行成本 | 需可靠旅行时间估计 | 走廊/路径成本敏感 |
| 相关性驱动 | 基于历史速度/流量相关性 | 捕捉拥堵传导与流相关 | 受数据质量影响 | 非平稳/事件驱动场景 |
| 多邻接融合 | 拓扑+距离+旅行时间+相关性 | 表达力强、鲁棒 | 融合权重需学习 | 异质结构/多关系场景 |
| 动态图 | 时变邻接A(t)生成 | 适应分钟级变化 | 训练复杂、稳定性要求高 | 动态图方法(AST-DGCN/DGCN) |

表6列出滑动窗口与数据划分的典型配置。

表6 滑动窗口与数据划分配置示例
| 数据集 | 历史窗口 | 预测步长 | 训练/验证/测试 | 备注 |
|---|---|---|---|---|
| METR-LA | 12×5min | 1/3/6/12步 | 60/20/20 | 单变量速度 |
| PEMS-BAY | 12×5min | 1/3/6/12步 | 60/20/20 | 单变量速度 |
| PEMS04 | 12×5min | 1/3/6/12步 | 60/20/20 | 多变量流量/速度/占有率 |
| PEMS08 | 12×5min | 1/3/6/12步 | 60/20/20 | 多变量 |

### 2.1 清洗与对齐

统一时区与采样周期后,对缺失值采用线性插值或前向填充;异常值通过箱线图或3σ规则识别并处理;重采样确保时间索引对齐到5分钟粒度。该环节是后续窗口化与归一化的基础,需记录修复策略与影响范围。

### 2.2 滑动窗口与归一化

历史窗口12步、步长1的设置为社区通用;归一化采用Z-Score或Min-Max,并严格使用训练集统计量进行验证/测试缩放,以避免数据泄漏。窗口化产物需与邻接矩阵与外部特征在时间索引上对齐[^9]。

### 2.3 邻接矩阵构建

静态邻接基于距离或拓扑,动态邻接基于相关性或时变权重;旅行时间作为权重进入GNN已验证可改善预测稳定性;多邻接融合通过加权或注意力机制形成综合邻接。动态图方法如AST-DGCN与DGCN通过自注意力或潜在网络生成时变邻接,提升对非平稳交通的适应能力[^11][^12][^13][^14]。

### 2.4 外部特征融合

节假日独热编码与天气缩放与主特征对齐;事件特征(事故/施工/封闭)进行语义编码并与预测结果进行叠加分析。外部特征在模型侧可通过注意力或多头融合与交通特征交互,提升泛化与鲁棒性。

## 3. 模型推理与预测流程

模型选型遵循“场景驱动”的原则:在数据规模适中且稳定性要求较高的业务中优先LSTM及其改进型;在长序列与复杂依赖场景中采用TCN/Transformer;在空间依赖复杂且随时间变化的路网中采用动态图GCN。输入输出规范统一为[batch, input_len, node, channels],多步预测采用迭代或直接多输出策略,并进行残差校正以降低累积误差。推理优化包括缓存、增量更新、批处理与并行化;动态图在线更新采用“慢更新+快自适应”的混合策略(周期性重建+相关性快速权重更新)。评测口径统一为MAE/RMSE/MAPE,进行显著性检验并记录计算成本与推理延迟[^15][^16][^17][^18][^19][^20]。

表7总结模型选型矩阵。

表7 模型选型矩阵
| 场景 | 数据规模 | 时序长度 | 空间依赖 | 推荐模型 | 依据 |
|---|---|---|---|---|---|
| 小样本/稳态 | 小 | 中短 | 中 | LSTM/Attention-LSTM | 工程稳健与可解释 |
| 长序列/复杂依赖 | 中 | 长 | 中—高 | TCN/Transformer | 并行化与长程建模 |
| 空间时变/事件驱动 | 中—大 | 中长 | 高(时变) | 动态图GCN(AST-DGCN/DGCN) | 时变邻接与时空联合 |
| 快速原型/工程入门 | 小—中 | 中短 | 中 | 串行GCN→LSTM/TCN(STGCN/T-GCN) | 结构清晰与复现友好 |

表8给出多步预测配置。

表8 多步预测配置
| 步长 | 输出策略 | 损失权重 | 校正策略 |
|---|---|---|---|
| 1步(5分钟) | 直接输出 | 均匀 | 残差旁路 |
| 3步(15分钟) | 直接输出/迭代 | 近期权重更高 | 残差校正 |
| 6步(30分钟) | 直接输出 | 近期>中期 | 双层残差校正 |
| 12步(60分钟) | 直接输出 | 近期>中期>远期 | 残差校正+注意力聚焦 |

### 3.1 模型选型与场景匹配

在短时预测与工程稳健性要求较高的场景中,LSTM类方法表现稳定;在极长序列与复杂依赖场景中,TCN/Transformer具备优势;空间依赖复杂且随时间变化的路网适合动态图GCN。综合考虑训练稳定性、推理延迟与工程资源,形成上述选型矩阵[^15][^16]。

### 3.2 推理与在线更新

动态图的在线更新建议采用“慢更新+快自适应”:小时级/日级周期性重建邻接矩阵,叠加分钟级相关性快速权重更新;节点嵌入与注意力权重可缓存并增量刷新。推理侧采用批处理与并行化,结合缓存策略以满足低延迟目标[^13]。

### 3.3 评测与基准

统一指标口径(MAE/RMSE/MAPE),采用时间顺序切分(60/20/20或70/10/20)并报告置信区间;以DCRNN在METR-LA与PEMS-BAY上的多步结果为硬指标标杆,结合PeMS04/08上的频域与动态图方法提升进行对比。表9给出DCRNN性能示例;表10给出FISTGCN在PeMS04/08的性能示例[^21][^22]。

表9 DCRNN在METR-LA与PEMS-BAY的多步性能(示例)
| 数据集 | 步长 | MAE | MAPE | RMSE |
|---|---|---:|---:|---:|
| METR-LA | 5min | 2.18 | 5.17% | 3.77 |
| METR-LA | 15min | 2.67 | 6.84% | 5.17 |
| METR-LA | 30min | 3.08 | 8.38% | 6.30 |
| METR-LA | 60min | 3.56 | 10.30% | 7.52 |
| PEMS-BAY | 5min | 0.85 | 1.63% | 1.54 |
| PEMS-BAY | 15min | 1.31 | 2.74% | 2.76 |
| PEMS-BAY | 30min | 1.66 | 3.76% | 3.78 |
| PEMS-BAY | 60min | 1.98 | 4.74% | 4.62 |

表10 FISTGCN在PeMS04/08的性能(示例)
| 数据集 | 模型 | MAE | RMSE | MAPE |
|---|---|---:|---:|---:|
| PeMS04 | FISTGCN | 18.06 | 29.92 | 12.05% |
| PeMS04 | 最佳基线(PDG2Seq) | 18.24 | 30.08 | 12.09% |
| PeMS08 | FISTGCN | 13.23 | 22.76 | 8.75% |
| PeMS08 | 最佳基线(PDG2Seq) | 13.60 | 23.37 | 8.99% |

## 4. 结果后处理与可视化流程

预测结果的后处理与可视化是连接模型与业务的关键环节。后处理包括时空一致性校正(邻域平滑与约束)、拥堵阈值化(速度/占有率/流量)、传播风险评估(基于冲击波与CTM的波速与影响范围估计),以及事件对齐(事故/施工/封闭的叠加分析)。可视化提供路网/走廊热力图、节点时序曲线、事件时间线与空间叠加,并支持交互筛选与多尺度缩放。输出接口包括GIS服务、REST/实时推送与告警规则(阈值/趋势/事件触发)。在事件型拥堵场景中,结合冲击波理论与CTM模型快速估算拥堵的生成—扩散—消散过程,提升预警与处置的可解释性与响应速度[^23][^24][^25]。

表11给出后处理规则清单。

表11 后处理规则清单
| 规则类型 | 触发条件 | 处理方法 | 输出指标 | 可视化映射 |
|---|---|---|---|---|
| 时空一致性校正 | 邻域不一致/噪声 | 邻域平滑/约束 | 平滑速度/流量 | 热力图/时序曲线 |
| 拥堵阈值化 | 速度<阈值/占有率>阈值 | 阈值化与分级 | 拥堵等级/持续时长 | 路网热力图 |
| 传播风险评估 | 事件触发/瓶颈识别 | 波速/影响范围估计 | 传播速度/影响范围 | 事件时间线与空间叠加 |
| 事件对齐 | 事故/施工/封闭 | 叠加分析 | 影响强度/恢复时长 | 事件标记与对齐视图 |
| 告警 | 趋势/阈值/事件触发 | 规则引擎/推送 | 告警等级/位置 | 告警面板与通知 |

## 5. 数据存储与管理策略

存储与管理策略采用“分层+版本化+质量监控+审计”的组合。分层存储包括原始层(Raw)、清洗层(Cleaned)、特征层(Features)、结果层(Results)、指标层(Metrics),并实施冷热分离与生命周期管理。数据版本化针对数据集、邻接矩阵、特征工程与模型版本,确保可回溯与可审计。数据质量监控覆盖缺失、异常、漂移与一致性,建立审计日志与访问控制。Schema管理采用Schema Registry与演进策略,保证兼容性与演进控制。公开数据集的产物(邻接矩阵、坐标元数据)可参考DCRNN仓库与相关整理文档,确保口径一致与可复现[^26][^27][^28][^29]。

表12给出数据分层与Schema映射。

表12 数据分层与Schema映射
| 层级 | 存储格式 | 典型Schema | 保留周期 | 访问控制 |
|---|---|---|---|---|
| 原始层(Raw) | CSV/HDF5/Parquet | 原始字段(速度/流量/占有率/事件/天气) | 长周期(归档) | 严格只读 |
| 清洗层(Cleaned) | Parquet/HDF5 | 对齐与修复后字段 | 中周期 | 读/写受控 |
| 特征层(Features) | Parquet | 张量与邻接矩阵(窗口化、归一化) | 中周期 | 读/写受控 |
| 结果层(Results) | Parquet/JSON | 预测结果与后处理产物 | 中周期 | 读/写受控 |
| 指标层(Metrics) | Parquet/JSON | 评测指标与审计日志 | 长周期 | 审计只读 |

表13给出数据质量监控清单。

表13 数据质量监控清单
| 监控项 | 检测方法 | 阈值 | 告警策略 | 修复流程 |
|---|---|---|---|---|
| 缺失率 | 字段统计 | <1–2% | 阈值告警 | 插值/重采 |
| 异常值 | 箱线图/3σ | 可控比例 | 趋势告警 | Winsorize/剔除 |
| 时钟漂移 | 时间索引校验 | 无漂移 | 立即告警 | 同步与回补 |
| 邻接一致性 | 坐标/距离核验 | 连通分量合理 | 周期性告警 | 修正坐标/阈值 |
| 归一化一致性 | 统计量对齐 | 仅训练集统计 | 周期性告警 | 重新缩放 |
| 数据漂移 | 分布对比 | 设定阈值 | 趋势告警 | 再训练/再校准 |

## 6. 实时数据流处理架构

实时架构以消息总线与流处理引擎为核心,支持低延迟与弹性扩展。消息总线采用Kafka/Pulsar,定义主题分区与保留策略;流处理采用Flink/Storm/Spark Streaming,实现窗口聚合与状态管理;在线特征服务负责动态图更新与外部特征对齐;服务层提供模型服务(批/流推理)与结果回传(告警/可视化)。容错与回退包括检查点与回放、幂等与去重、熔断与降级策略。性能与扩展通过水平扩展、缓存与并行化实现,并进行容量规划与压测。事件数据与公开事件平台可作为实时流的主题参考与数据来源[^30][^31][^6]。

表14给出实时主题与SLA矩阵。

表14 实时主题与SLA矩阵
| 主题 | 生产者 | 消费者 | 目标延迟 | 吞吐 | 可用性 | 降级策略 |
|---|---|---|---|---|---|---|
| traffic.raw.observations | 传感器接入 | 流处理引擎 | 秒级 | 高 | 高 | 批处理回退 |
| traffic.cleaned.windowed | 清洗/窗口化 | 特征服务/模型服务 | 秒级 | 中—高 | 高 | 缓存增量 |
| traffic.features.dynamic_graph | 特征服务 | 模型服务 | 秒级 | 中 | 高 | 静态图回退 |
| traffic.model.outputs | 模型服务 | 后处理/可视化 | 秒级 | 中 | 高 | 旁路规则 |
| traffic.alerts | 后处理 | 告警系统/推送 | 秒级 | 中 | 高 | 阈值放宽 |
| weather.forecast | 天气服务 | 特征服务 | 分钟级 | 中 | 高 | 前向填充 |
| events.incidents | 事件平台 | 流处理/后处理 | 秒级 | 中 | 高 | 去重与合并 |

## 7. 评测、监控与合规

评测协议包括统一数据切分(60/20/20或70/10/20)、指标口径(MAE/RMSE/MAPE)与显著性检验,并记录计算成本与推理延迟。线上监控覆盖延迟、吞吐、错误率与质量指标(预测准确性/漂移),并建立告警与回滚机制。可解释性评估采用空间统计(Global Moran’s I、FSTI、网络Ripley’s K)与路网异质性(Hits@1),进行结构—性能映射分析与治理建议。合规与伦理包括数据许可、隐私保护与审计追踪,明确公开数据集的研究用途限制与引用规范[^32][^33][^34][^35][^36][^37][^1]。

表15给出评测记录模板。

表15 评测记录模板
| 数据集 | 窗口/步长 | 划分比例 | 指标(MAE/RMSE/MAPE) | 超参数(隐藏维/层数/学习率/批大小) | 训练时长/GPU显存 | 备注 |
|---|---|---|---|---|---|---|
| PEMS04 | 12/1 | 60/20/20 | 18.1 / 29.9 / 12.1% | 64 / 6 / 1e-3 / 16 | 52.8s/epoch / 3.95GB | 频域+动态图 |
| METR-LA | 12/1 | 60/20/20 | 2.18 / 3.77 / 5.17% | 64 / — / — / — | — | DCRNN 5min |

表16给出线上监控指标与阈值。

表16 线上监控指标与阈值
| 指标 | 目标阈值 | 告警策略 | 回滚策略 |
|---|---|---|---|
| 端到端延迟 | 秒级/分钟级 | 趋势告警 | 降级推理/缓存 |
| 吞吐 | 满足峰值 | 阈值告警 | 水平扩展 |
| 错误率 | <设定阈值 | 立即告警 | 熔断与旁路 |
| 数据缺失率 | <1–2% | 阈值告警 | 插值/重采 |
| 归一化一致性 | 训练集统计 | 周期性告警 | 重新缩放 |
| 模型质量(MAE) | 设定目标 | 趋势告警 | 模型回滚 |

## 8. 实施路线图与风险清单

实施路线遵循“原型→试点→规模化”的阶段化推进。原型阶段完成数据接入与预处理管线、基线模型(GCN+LSTM/TCN)与评测协议;试点阶段引入动态图与外部特征融合,建立实时流处理与后处理/可视化闭环,并进行事件对齐与告警;规模化阶段完善分层存储与版本治理、在线监控与回滚机制、容错与降级策略,并进行容量规划与压测。风险包括数据质量与口径不一致、动态图训练不稳定、延迟与资源约束、跨域迁移与泛化不足,需制定缓解措施与应急预案[^38][^23][^39]。

表17给出里程碑与交付物清单。

表17 里程碑与交付物清单
| 阶段 | 目标 | 关键任务 | 验收标准 | 时间安排 |
|---|---|---|---|---|
| 原型 | 管线与基线 | 数据接入/预处理/评测协议 | 复现实验与指标达标 | 短期 |
| 试点 | 实时闭环 | 动态图/外部特征/流处理/可视化 | 延迟与准确性达标 | 中期 |
| 规模化 | 稳定运营 | 存储与治理/监控与回滚/容错与压测 | SLA与合规达标 | 中长期 |

表18给出风险—影响—概率—缓解矩阵。

表18 风险—影响—概率—缓解矩阵
| 风险 | 影响 | 概率 | 缓解措施 |
|---|---|---|---|
| 数据质量/口径不一致 | 训练与评测失真 | 中—高 | 质检与口径统一、审计 |
| 动态图训练不稳定 | 性能波动 | 中 | 残差校正、学习率调度、梯度裁剪 |
| 延迟与资源约束 | 实时性下降 | 中 | 批处理与并行化、缓存与增量更新 |
| 跨域迁移/泛化不足 | 新场景表现不佳 | 中 | 多邻接融合、注意力与外部特征、迁移学习 |
| 事件数据语义不一致 | 叠加分析偏差 | 中 | 字段字典与接口对齐、去重与合并 |
| 合规与隐私风险 | 法务与声誉 | 低—中 | 许可核验、匿名化与审计 |

---

## 参考文献

[^1]: 交通预测模型与数据集综合评估(traffic_prediction 项目)。https://www.dongaigc.com/p/aprbw/traffic_prediction  
[^2]: 交通流理论与深度仿真(同济大学TOPS课题组)。https://tops.tongji.edu.cn/kxyj/jtlllysdfz.htm  
[^3]: 交通流模型(百度百科)。https://baike.baidu.com/item/%E4%BA%A4%E9%80%9A%E6%B5%81%E6%A8%A1%E5%9E%8B/22500127  
[^4]: California Traffic Network Datasets: PEMS03/04/07/08(IEEE DataPort)。https://ieee-dataport.org/documents/california-traffic-network-datasets-pems03-pems04-pems07-and-pems08-traffic-flow  
[^5]: METR-LA 数据集(SelectDataset)。https://www.selectdataset.com/dataset/cc64936aa21eaeb350e8ea1069192959  
[^6]: Waze Live Map & Traffic Events。https://www.waze.com/live-map  
[^7]: PEMS-BAY, METR-LA and PEMS07(TIB LDM)。https://service.tib.eu/ldmservice/dataset/pems-bay--metr-la-and-pems07  
[^8]: 交通速度数据集处理与邻接矩阵生成:基于 METR-LA、PEMS-BAY、PeMSD7(M/L)。https://blog.csdn.net/2401_88440984/article/details/149526633  
[^9]: Keras示例:使用图神经网络和LSTM进行交通预测。https://keras.org.cn/examples/timeseries/timeseries_traffic_forecasting/  
[^10]: DCRNN:扩散卷积循环神经网络(GitHub)。https://github.com/liyaguang/DCRNN  
[^11]: 融合出行时间的加权邻接矩阵用于GNN交通预测(arXiv,2024)。https://arxiv.org/html/2407.12238v2  
[^12]: DCGCN:动态相关性邻接矩阵驱动的图卷积网络(Sensors,2023)。https://www.mdpi.com/1424-8220/23/6/2897  
[^13]: AST-DGCN:自适应时空动态图卷积网络用于交通预测(Nature Sci Rep,2025)。https://www.nature.com/articles/s41598-025-12261-7  
[^14]: DGCN代码仓库。https://github.com/guokan987/DGCN.git  
[^15]: HansPub:交通流动态预测LSTM模型设计。https://pdf.hanspub.org/CSA20231200000_59516045.pdf  
[^16]: 长期Transformer和自适应傅里叶变换的动态图卷积交通流预测(电子与信息学报,2025)。https://jeit.ac.cn/cn/article/doi/10.11999/JEIT241076  
[^17]: STGCN_IJCAI-18(GitHub)。https://github.com/VeritasYin/STGCN_IJCAI-18  
[^18]: T-GCN: Temporal Graph Convolutional Network(GitHub)。https://github.com/lehaifeng/T-GCN  
[^19]: IEEE T-GCN: A Temporal Graph Convolutional Network for Traffic Prediction。https://ieeexplore.ieee.org/abstract/document/8809901  
[^20]: GraphWaveNet(IJCAI-19)解读(知乎专栏)。https://zhuanlan.zhihu.com/p/698262512  
[^21]: DCRNN 论文与性能(ICLR 2018,GitHub实现)。https://github.com/liyaguang/DCRNN  
[^22]: 频率感知与交互式时空图卷积网络(FISTGCN,MDPI 2024)。https://www.mdpi.com/2076-3417/15/20/11254  
[^23]: CTM模型突发事件下的拥堵传播规律(北京建筑大学学报)。https://journal.bjut.edu.cn/bjgydxxb/cn/article/pdf/preview/10.11936/bjutxb2015010018.pdf  
[^24]: 车流冲击波(百度百科)。https://baike.baidu.com/item/%E8%BD%A6%E6%B5%81%E5%86%B2%E5%87%BB%E6%B3%A2/22655133  
[^25]: 基于矩形法的交通拥堵传播模型研究(中国智能交通网)。https://www.chinautc.com/upload/accessorychinautc/201810/2018103191348532954.pdf  
[^26]: SANDAG/PeMS-Datasets(GitHub)。https://github.com/SANDAG/PeMS-Datasets  
[^27]: PEMS-03/04/07/08(Kaggle)。https://www.kaggle.com/datasets/markbai/pems-03478  
[^28]: 交通流数据集 PEMS 04–08(GitCode 开源工具包)。https://gitcode.com/open-source-toolkit/06a2f  
[^29]: PeMS 数据集(SelectDataset)。https://www.selectdataset.com/dataset/cfaf57801b1ae3c6b9d9aa5894e10e08  
[^30]: EMVLight: A multi-agent RL framework with dynamic routing for traffic control(ScienceDirect)。https://www.sciencedirect.com/science/article/pii/S0968090X22003680  
[^31]: Dynamic Route Planning Strategy for Emergency Vehicles Based on Government–Enterprise Collaboration(MDPI)。https://www.mdpi.com/2076-3417/15/21/11496  
[^32]: 空间自相关(Global Moran’s I)工具文档(ArcGIS Pro)。https://pro.arcgis.com/en/pro-app/latest/tool-reference/spatial-statistics/spatial-autocorrelation.htm  
[^33]: 空间自相关(Global Moran’s I)工具文档(ArcGIS Pro,中文)。https://pro.arcgis.com/zh-cn/pro-app/latest/tool-reference/spatial-statistics/spatial-autocorrelation.htm  
[^34]: Flow Spatiotemporal Moran’s I:测量流的时空自相关(Wiley)。https://onlinelibrary.wiley.com/doi/abs/10.1111/gean.12397  
[^35]: 捕捉道路交通安全风险信号:网络约束Ripley’s K函数(T&F,2024)。https://www.tandfonline.com/doi/full/10.1080/15389588.2024.2427270  
[^36]: 从网格到树突:量化路网空间异质性(ScienceDirect,2025)。https://www.sciencedirect.com/science/article/pii/S0198971525000626  
[^37]: 交通流预测方法综述(MDPI Applied Sciences)。https://www.mdpi.com/2076-3417/15/7/3866  
[^38]: 交通流理论与深度仿真(同济大学TOPS课题组)。https://tops.tongji.edu.cn/kxyj/jtlllysdfz.htm  
[^39]: 城市快速路改进型元胞传输模型及仿真。https://html.rhhz.net/GLJTKJ/20150621.htm